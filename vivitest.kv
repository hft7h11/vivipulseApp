#:kivy 1.0.9
#:import MeshLinePlot kivy.garden.graph.MeshLinePlot

<ViViChart>:
    id: ViViChart        
    GridLayout
        rows: 3
        size: root.size
        spacing: 20
        padding: 10
        
        Graph:
            id: graph
            plot: MeshLinePlot
            #xlabel: 'X'
            #ylabel: 'Y'
            xmin: -0
            xmax: 300 
            ymin: 300
            ymax: 700
            y_ticks_major: 500
            x_ticks_minor: 100
            #x_grid: True
            #y_grid: True
            y_grid_label: True
            x_grid_label: True
            padding: 5
            size: self.parent.x, 600
            pos: 0,0
            
            Label:
                text: str(root.spike_threshold)
                top: self.parent.top
                right: self.parent.right
                
        Graph:
            id: graph2
            plot: MeshLinePlot
            #xlabel: 'X'
            #ylabel: 'Y'
            xmin: -0
            xmax: 300 
            ymin: 300
            ymax: 700
            y_ticks_major: 500
            x_ticks_minor: 100
            #x_grid: True
            #y_grid: True
            y_grid_label: True
            x_grid_label: True
            padding: 5
            size: self.parent.x, 600
            pos: 0,0
        
        GridLayout:
            id: gl
            popup2: popup2.__self__
            cols:3
            size_hint: 1, 0.1
            spacing: 0

            Popup:
                id: popup2
                size_hint: 1, 0.1
                auto_dismiss: True
                on_parent: if self.parent == gl: self.parent.remove_widget(self)

                Bubble:
                    id:bubb
                    size_hint_y: None
                    height: '48dp'
                    
                    BubbleButton:
                        id: bb1
                        text: 'Search for devices'
                        on_release: root.search_for_devices()

                    BubbleButton:
                        text: str(root.spike_threshold)
                        on_release: popup2.dismiss()
                
            Button:
                text: 'Bluetooth'
                on_release:  self.parent.popup2.open()
                size_hint_y: None
                height: '48dp'                    

            Button:
                text: 'Pause'
                on_press: 
                size_hint_y: None
                height: '48dp'
            
            Button:
                text: 'Exit'
                on_press: app.exit()
                size_hint_y: None
                height: '48dp'